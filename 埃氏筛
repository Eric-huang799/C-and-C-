#include <bits/stdc++.h>
using namespace std;

/* 埃氏筛模板
 * 输入：正整数 n (n >= 2)
 * 输出：vector<bool> isPrime，isPrime[i] == true 表示 i 是素数
 */
vector<bool> sieve(int n) {
    vector<bool> isPrime(n + 1, true);
    isPrime[0] = isPrime[1] = false;
    for (int p = 2; 1LL * p * p <= n; ++p) {
        if (isPrime[p]) {
            // 从 p*p 开始筛，比 2p、3p 起点更高，常数更小
            for (int j = p * p; j <= n; j += p)
                isPrime[j] = false;
        }
    }
    return isPrime;
}

/* --------- 演示 --------- */
int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n;
    cout << "输入上限 n：";
    if (!(cin >> n) || n < 2) return 0;

    auto isPrime = sieve(n);

    // 输出所有素数
    cout << "小于等于 " << n << " 的素数：\n";
    for (int i = 2; i <= n; ++i)
        if (isPrime[i]) cout << i << ' ';
    cout << '\n';
    return 0;
}